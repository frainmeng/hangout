inputs:
   - Kafka:
        codec: json
        encoding: UTF8 # defaut UTF8
        topic:
          logstash23: 1
        consumer_settings:
          group.id: testbb
          zookeeper.connect: 10.1.26.8:2181,10.1.26.9:2181,10.1.26.10:2181
          auto.commit.interval.ms: "5000"

filters:
    - Filters:
        if:
          - '<#if business??>false<#else>true</#if>'
        filters:
          - Drop: {}
    - Lowercase:
        fields: ['business']
    - Rename:
        fields:
          source: path
    - Remove:
        fields:
          - offset
          - tags
          - beat
          - input_type
outputs:
#    - Stdout:
#        fields: {}
#
    - Elasticsearch:
        cluster: TEST-ELK
        hosts:
          - 10.0.26.1
          - 10.0.26.2
          - 10.0.26.3
        index: '%{business}-%{+YYYY.MM.dd}'
      # index_type: span # default logs
        index_type: span # default logs
      # document_id: ${id} # defautt null, generated by es
        bulk_actions: 80000 #default 20000
        bulk_size: 20 # default 15 MB
        flush_interval: 15 # default 5 seconds
        concurrent_requests: 0 # default 0, concurrent_requests设置成大于0的数, 意思着多线程处理, 以我应用的经验,还有是一定OOM风险的,强烈建议设置为0
        timezone: "Asia/Shanghai" # defaut UTC 时区. 只用于生成索引名字的字符串格式化
        sniff: false #default true

errorOutputs:
#    - Elasticsearch:
#        cluster: TEST-ELK
#        hosts:
#          - 10.0.26.15
#          - 10.0.26.16
#          - 10.0.26.17
#        index: 'hangout_error-%{+YYYY.MM.dd}'
      # index_type: span # default logs
#        index_type: span # default logs
      # document_id: ${id} # defautt null, generated by es
#        bulk_actions: 80000 #default 20000
#        bulk_size: 20 # default 15 MB
#        flush_interval: 15 # default 5 seconds
#        concurrent_requests: 0 # default 0, concurrent_requests设置成大于0的数, 意思着多线程处理, 以我应用的经验,还有是一定OOM风险的,强烈建议设置为0
#        timezone: "Asia/Shanghai" # defaut UTC 时区. 只用于生成索引名字的字符串格式化
#        sniff: false #default true
    - Log:
        filePath: E:\config\hangout\outerror.log
        template: '[${@timestamp?if_exists}] [${business?if_exists}] [${ip?if_exists}:${path?if_exists}]'

#metrics:
#    - Graphit:
#        port: 2003  # graphit port
#        host: 10.0.21.113  # graphit host
#        prefix: stats.hangout
#        metrics:
#            com.codahale.metrics.JvmAttributeGaugeSet: [] # empty list will register all metrics in it
#            com.codahale.metrics.jvm.MemoryUsageGaugeSet: []
#            com.codahale.metrics.jvm.ThreadStatesGaugeSet: []
#            com.codahale.metrics.jvm.GarbageCollectorMetricSet: []
#
#    - Watcher:
#        host: 0.0.0.0
#        port: 8080